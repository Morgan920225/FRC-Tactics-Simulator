<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FRC 2026 REBUILT ‚Äî Tactic Simulator</title>
    <meta name="description"
        content="Physics-based FRC 2026 REBUILT match tactic simulator. Simulate alliance strategies, ranking points, and find optimal tactics.">
    <link rel="stylesheet" href="styles.css">
</head>

<body>

    <header class="header">
        <div class="header__badge">
            <span>‚öôÔ∏è</span> FRC 2026 ¬∑ REBUILT
        </div>
        <h1 class="header__title">Tactic Simulator</h1>
        <p class="header__subtitle">Physics-based match simulation ¬∑ 8 alliance tactics ¬∑ 9 auto levels ¬∑ Ranking point
            analysis</p>
    </header>

    <div class="container">

        <!-- TOP-LEVEL TABS -->
        <div class="main-tabs" id="mainTabs">
            <button class="main-tab main-tab--active" data-tab="info" id="tabInfo">üìñ Information</button>
            <button class="main-tab" data-tab="sim" id="tabSim">üéÆ Simulator</button>
        </div>

        <!-- ============================================================ -->
        <!-- INFORMATION TAB -->
        <!-- ============================================================ -->
        <div id="panelInfo" class="main-panel main-panel--active">

            <!-- Sub-tabs for info sections -->
            <div class="info-nav" id="infoNav">
                <button class="info-nav__btn info-nav__btn--active" data-section="gameIntro">üèüÔ∏è Game Overview</button>
                <button class="info-nav__btn" data-section="robotTiers">ü§ñ Robot Tiers</button>
                <button class="info-nav__btn" data-section="simWorkflow">‚öôÔ∏è How Simulation Works</button>
                <button class="info-nav__btn" data-section="tacticGuide">üìã Tactic Guide</button>
            </div>

            <!-- SECTION 1: Game Overview -->
            <div class="info-section info-section--active" id="sec_gameIntro">
                <div class="section-title">üèüÔ∏è FRC 2026 "REBUILT" ‚Äî Game Overview</div>

                <div class="info-card">
                    <h3 class="info-card__title">What is REBUILT?</h3>
                    <p>
                        <strong>REBUILT</strong> is the 2026 FIRST Robotics Competition game. Two alliances of 3 robots
                        each compete on a field filled with
                        <strong>fuel</strong> (small balls). Robots collect fuel and shoot it into
                        <strong>hubs</strong>.
                        The match lasts <strong>150 seconds</strong> (2.5 minutes), split into three phases.
                    </p>
                </div>

                <!-- ====== FIELD LAYOUT DIAGRAM ====== -->
                <div class="info-card">
                    <h3 class="info-card__title">üó∫Ô∏è Field Layout</h3>
                    <p style="margin-bottom:16px;">The field features a <strong>Depot</strong> and
                        <strong>Outpost</strong> for fuel loading, plus Towers and Hubs.
                    </p>
                    <div style="display:flex;justify-content:center;padding:8px;">
                        <svg viewBox="0 0 640 360"
                            style="width:100%;max-width:640px;border-radius:12px;background:linear-gradient(135deg,#0f1923,#162033);border:1px solid rgba(255,255,255,0.08);"
                            xmlns="http://www.w3.org/2000/svg">
                            <!-- Field Boundary -->
                            <rect x="20" y="20" width="600" height="320" rx="8" fill="none"
                                stroke="rgba(255,255,255,0.15)" stroke-width="2" />

                            <!-- Zones Backgrounds -->
                            <!-- Red Zone (Left) -->
                            <rect x="20" y="20" width="240" height="320" fill="rgba(239,68,68,0.03)" />
                            <!-- Blue Zone (Right) -->
                            <rect x="380" y="20" width="240" height="320" fill="rgba(59,130,246,0.03)" />
                            <!-- Neutral Zone (Center) -->
                            <rect x="260" y="20" width="120" height="320" fill="rgba(255,255,255,0.02)" />

                            <!-- Zone Dividers -->
                            <line x1="260" y1="20" x2="260" y2="340" stroke="rgba(239,68,68,0.2)" stroke-width="1.5"
                                stroke-dasharray="4 4" />
                            <line x1="380" y1="20" x2="380" y2="340" stroke="rgba(59,130,246,0.2)" stroke-width="1.5"
                                stroke-dasharray="4 4" />

                            <!-- Center Line -->
                            <line x1="320" y1="20" x2="320" y2="340" stroke="rgba(255,255,255,0.1)" stroke-width="2" />
                            <text x="320" y="38" fill="rgba(255,255,255,0.3)" font-size="9" text-anchor="middle"
                                font-weight="bold" font-family="sans-serif">NEUTRAL ZONE</text>

                            <!-- Red side label -->
                            <text x="140" y="38" fill="#ef4444" font-size="11" font-weight="bold" text-anchor="middle"
                                font-family="sans-serif">RED ALLIANCE</text>
                            <!-- Blue side label -->
                            <text x="500" y="38" fill="#3b82f6" font-size="11" font-weight="bold" text-anchor="middle"
                                font-family="sans-serif">BLUE ALLIANCE</text>

                            <!-- RED HUB (1 on left side, centered) -->
                            <!-- Hub 1 -->
                            <polygon points="180,170 200,160 220,170 220,190 200,200 180,190"
                                fill="rgba(168,85,247,0.25)" stroke="#a78bfa" stroke-width="2" />
                            <text x="200" y="184" fill="#a78bfa" font-size="9" text-anchor="middle" font-weight="bold"
                                font-family="sans-serif">HUB</text>

                            <!-- BLUE HUB (1 on right side, centered) -->
                            <!-- Hub 2 -->
                            <polygon points="420,170 440,160 460,170 460,190 440,200 420,190"
                                fill="rgba(168,85,247,0.25)" stroke="#a78bfa" stroke-width="2" />
                            <text x="440" y="184" fill="#a78bfa" font-size="9" text-anchor="middle" font-weight="bold"
                                font-family="sans-serif">HUB</text>

                            <!-- RED TOWER (Connected to Red DS/Depot) -->
                            <rect x="38" y="140" width="42" height="80" rx="4" fill="rgba(34,197,94,0.1)"
                                stroke="#22c55e" stroke-width="1.5" />
                            <line x1="60" y1="145" x2="60" y2="215" stroke="#22c55e" stroke-width="2" />
                            <text x="60" y="235" fill="#22c55e" font-size="9" text-anchor="middle"
                                font-family="sans-serif">TOWER</text>

                            <!-- BLUE TOWER (Connected to Blue DS/Depot) -->
                            <rect x="560" y="140" width="42" height="80" rx="4" fill="rgba(34,197,94,0.1)"
                                stroke="#22c55e" stroke-width="1.5" />
                            <line x1="580" y1="145" x2="580" y2="215" stroke="#22c55e" stroke-width="2" />
                            <text x="580" y="235" fill="#22c55e" font-size="9" text-anchor="middle"
                                font-family="sans-serif">TOWER</text>


                            <!-- Fuel Grid in Neutral Zone (as per reference image) -->
                            <g id="fuelGrid">
                                <circle cx="305" cy="150" r="3" fill="#f59e0b" />
                                <circle cx="305" cy="160" r="3" fill="#f59e0b" />
                                <circle cx="305" cy="170" r="3" fill="#f59e0b" />
                                <circle cx="305" cy="180" r="3" fill="#f59e0b" />
                                <circle cx="305" cy="190" r="3" fill="#f59e0b" />
                                <circle cx="305" cy="200" r="3" fill="#f59e0b" />
                                <circle cx="305" cy="210" r="3" fill="#f59e0b" />

                                <circle cx="315" cy="150" r="3" fill="#f59e0b" />
                                <circle cx="315" cy="160" r="3" fill="#f59e0b" />
                                <circle cx="315" cy="170" r="3" fill="#f59e0b" />
                                <circle cx="315" cy="180" r="3" fill="#f59e0b" />
                                <circle cx="315" cy="190" r="3" fill="#f59e0b" />
                                <circle cx="315" cy="200" r="3" fill="#f59e0b" />
                                <circle cx="315" cy="210" r="3" fill="#f59e0b" />

                                <circle cx="325" cy="150" r="3" fill="#f59e0b" />
                                <circle cx="325" cy="160" r="3" fill="#f59e0b" />
                                <circle cx="325" cy="170" r="3" fill="#f59e0b" />
                                <circle cx="325" cy="180" r="3" fill="#f59e0b" />
                                <circle cx="325" cy="190" r="3" fill="#f59e0b" />
                                <circle cx="325" cy="200" r="3" fill="#f59e0b" />
                                <circle cx="325" cy="210" r="3" fill="#f59e0b" />

                                <circle cx="335" cy="150" r="3" fill="#f59e0b" />
                                <circle cx="335" cy="160" r="3" fill="#f59e0b" />
                                <circle cx="335" cy="170" r="3" fill="#f59e0b" />
                                <circle cx="335" cy="180" r="3" fill="#f59e0b" />
                                <circle cx="335" cy="190" r="3" fill="#f59e0b" />
                                <circle cx="335" cy="200" r="3" fill="#f59e0b" />
                                <circle cx="335" cy="210" r="3" fill="#f59e0b" />
                            </g>

                            <!-- Red Depot (Top Left) -->
                            <rect x="20" y="20" width="20" height="60" rx="2" fill="rgba(239,68,68,0.2)"
                                stroke="#ef4444" stroke-width="1.5" stroke-dasharray="2 2" />
                            <text x="35" y="50" fill="#ef4444" font-size="8" text-anchor="middle" font-weight="bold"
                                transform="rotate(-90 35 50)" font-family="sans-serif">DEPOT</text>

                            <!-- Red Outpost (Bottom Left) -->
                            <rect x="20" y="280" width="20" height="60" rx="2" fill="rgba(239,68,68,0.2)"
                                stroke="#ef4444" stroke-width="1.5" stroke-dasharray="2 2" />
                            <text x="35" y="310" fill="#ef4444" font-size="8" text-anchor="middle" font-weight="bold"
                                transform="rotate(-90 35 310)" font-family="sans-serif">OUTPOST</text>

                            <!-- Red Driver Station (Middle) -->
                            <rect x="20" y="90" width="10" height="180" rx="0" fill="none" stroke="rgba(239,68,68,0.3)"
                                stroke-width="1" />
                            <text x="26" y="180" fill="rgba(239,68,68,0.5)" font-size="8" text-anchor="middle"
                                transform="rotate(-90 26 180)" font-family="sans-serif">DRIVER STATION</text>

                            <!-- Blue Depot (Top Right) -->
                            <rect x="600" y="20" width="20" height="60" rx="2" fill="rgba(59,130,246,0.2)"
                                stroke="#3b82f6" stroke-width="1.5" stroke-dasharray="2 2" />
                            <text x="605" y="50" fill="#3b82f6" font-size="8" text-anchor="middle" font-weight="bold"
                                transform="rotate(90 605 50)" font-family="sans-serif">DEPOT</text>

                            <!-- Blue Outpost (Bottom Right) -->
                            <rect x="600" y="280" width="20" height="60" rx="2" fill="rgba(59,130,246,0.2)"
                                stroke="#3b82f6" stroke-width="1.5" stroke-dasharray="2 2" />
                            <text x="605" y="310" fill="#3b82f6" font-size="8" text-anchor="middle" font-weight="bold"
                                transform="rotate(90 605 310)" font-family="sans-serif">OUTPOST</text>

                            <!-- Blue Driver Station (Middle) -->
                            <rect x="610" y="90" width="10" height="180" rx="0" fill="none"
                                stroke="rgba(59,130,246,0.3)" stroke-width="1" />
                            <text x="618" y="180" fill="rgba(59,130,246,0.5)" font-size="8" text-anchor="middle"
                                transform="rotate(90 618 180)" font-family="sans-serif">DRIVER STATION</text>

                            <!-- Robot Start Positions (approximate) -->
                            <rect x="60" y="160" width="16" height="16" rx="2" fill="rgba(239,68,68,0.5)"
                                stroke="#ef4444" stroke-width="1" />
                            <rect x="60" y="185" width="16" height="16" rx="2" fill="rgba(239,68,68,0.5)"
                                stroke="#ef4444" stroke-width="1" />
                            <rect x="60" y="210" width="16" height="16" rx="2" fill="rgba(239,68,68,0.5)"
                                stroke="#ef4444" stroke-width="1" />

                            <rect x="564" y="160" width="16" height="16" rx="2" fill="rgba(59,130,246,0.5)"
                                stroke="#3b82f6" stroke-width="1" />
                            <rect x="564" y="185" width="16" height="16" rx="2" fill="rgba(59,130,246,0.5)"
                                stroke="#3b82f6" stroke-width="1" />
                            <rect x="564" y="210" width="16" height="16" rx="2" fill="rgba(59,130,246,0.5)"
                                stroke="#3b82f6" stroke-width="1" />

                            <!-- Legend -->
                            <rect x="250" y="300" width="140" height="34" rx="6" fill="rgba(0,0,0,0.6)"
                                stroke="rgba(255,255,255,0.1)" stroke-width="1" />
                            <circle cx="265" cy="310" r="3" fill="#a78bfa" /><text x="274" y="313"
                                fill="rgba(255,255,255,0.7)" font-size="8" font-family="sans-serif">Hub</text>
                            <rect x="262" y="320" width="6" height="6" fill="rgba(34,197,94,0.3)" stroke="#22c55e"
                                stroke-width="1" /><text x="274" y="325" fill="rgba(255,255,255,0.7)" font-size="8"
                                font-family="sans-serif">Tower</text>
                            <circle cx="310" cy="310" r="3" fill="#f59e0b" /><text x="319" y="313"
                                fill="rgba(255,255,255,0.7)" font-size="8" font-family="sans-serif">Fuel</text>
                        </svg>
                    </div>
                    <p style="margin-top:12px;font-size:11px;color:var(--text-muted);text-align:center;">Simplified
                        field diagram ‚Äî actual field is 54' √ó 27' (16.5m √ó 8.2m)</p>
                </div>

                <!-- ====== MATCH PHASES with visual timeline ====== -->
                <div class="info-card">
                    <h3 class="info-card__title">‚è±Ô∏è Match Phases</h3>
                    <!-- Visual timeline bar -->
                    <div
                        style="display:flex;border-radius:8px;overflow:hidden;height:40px;margin-bottom:20px;border:1px solid rgba(255,255,255,0.08);">
                        <div
                            style="flex:0 0 13.3%;background:linear-gradient(135deg,#7c3aed,#a78bfa);display:flex;align-items:center;justify-content:center;gap:4px;">
                            <span style="font-size:11px;font-weight:700;color:white;">AUTO</span>
                            <span style="font-size:9px;color:rgba(255,255,255,0.7);">20s</span>
                        </div>
                        <div
                            style="flex:0 0 6.7%;background:repeating-linear-gradient(45deg,rgba(255,255,255,0.03),rgba(255,255,255,0.03) 4px,transparent 4px,transparent 8px);display:flex;align-items:center;justify-content:center;">
                            <span style="font-size:8px;color:rgba(255,255,255,0.4);">10s</span>
                        </div>
                        <div
                            style="flex:0 0 16.7%;background:linear-gradient(135deg,#1e40af,#3b82f6);display:flex;align-items:center;justify-content:center;">
                            <span style="font-size:9px;font-weight:600;color:white;">SHIFT 1</span>
                        </div>
                        <div
                            style="flex:0 0 16.7%;background:linear-gradient(135deg,#1d4ed8,#60a5fa);display:flex;align-items:center;justify-content:center;">
                            <span style="font-size:9px;font-weight:600;color:white;">SHIFT 2</span>
                        </div>
                        <div
                            style="flex:0 0 16.7%;background:linear-gradient(135deg,#2563eb,#93c5fd);display:flex;align-items:center;justify-content:center;">
                            <span style="font-size:9px;font-weight:600;color:rgba(0,0,0,0.7);">SHIFT 3</span>
                        </div>
                        <div
                            style="flex:0 0 16.7%;background:linear-gradient(135deg,#3b82f6,#bfdbfe);display:flex;align-items:center;justify-content:center;">
                            <span style="font-size:9px;font-weight:600;color:rgba(0,0,0,0.7);">SHIFT 4</span>
                        </div>
                        <div
                            style="flex:1;background:linear-gradient(135deg,#166534,#22c55e);display:flex;align-items:center;justify-content:center;gap:4px;">
                            <span style="font-size:11px;font-weight:700;color:white;">END</span>
                            <span style="font-size:9px;color:rgba(255,255,255,0.7);">30s</span>
                        </div>
                    </div>
                    <div style="display:flex;justify-content:space-between;margin-bottom:20px;">
                        <span style="font-size:10px;color:var(--text-muted);">0:00</span>
                        <span style="font-size:10px;color:var(--text-muted);">0:20</span>
                        <span style="font-size:10px;color:var(--text-muted);">0:30</span>
                        <span style="font-size:10px;color:var(--text-muted);">1:20</span>
                        <span style="font-size:10px;color:var(--text-muted);">2:00</span>
                        <span style="font-size:10px;color:var(--text-muted);">2:30</span>
                    </div>

                    <div class="info-phases">
                        <div class="info-phase">
                            <div class="info-phase__header" style="border-color:#a78bfa;">
                                <span class="info-phase__time">0 ‚Äì 20s</span>
                                <span class="info-phase__name">Autonomous</span>
                            </div>
                            <div style="display:flex;gap:12px;align-items:flex-start;">
                                <svg viewBox="0 0 48 48" style="width:48px;flex-shrink:0;"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <rect x="4" y="10" width="40" height="28" rx="4" fill="rgba(167,139,250,0.15)"
                                        stroke="#a78bfa" stroke-width="1.5" />
                                    <rect x="14" y="18" width="12" height="10" rx="2" fill="#a78bfa" opacity="0.6" />
                                    <path d="M26 23L36 18L36 28Z" fill="#a78bfa" opacity="0.4" />
                                    <circle cx="30" cy="35" r="2" fill="#f59e0b" />
                                    <circle cx="35" cy="32" r="2" fill="#f59e0b" opacity="0.7" />
                                </svg>
                                <p>Robots run pre-programmed routines. No human control. Robots may leave the starting
                                    zone (+3 pts), shoot preloaded fuel, pick up extra fuel, and even attempt an L1
                                    climb.</p>
                            </div>
                        </div>
                        <div class="info-phase">
                            <div class="info-phase__header" style="border-color:#3b82f6;">
                                <span class="info-phase__time">20 ‚Äì 120s</span>
                                <span class="info-phase__name">Teleop (4 √ó 25s Shifts)</span>
                            </div>
                            <div style="display:flex;gap:12px;align-items:flex-start;">
                                <svg viewBox="0 0 48 48" style="width:48px;flex-shrink:0;"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <rect x="4" y="10" width="40" height="28" rx="4" fill="rgba(59,130,246,0.15)"
                                        stroke="#3b82f6" stroke-width="1.5" />
                                    <circle cx="16" cy="24" r="5" fill="#3b82f6" opacity="0.3" stroke="#3b82f6"
                                        stroke-width="1" />
                                    <circle cx="36" cy="24" r="5" fill="#3b82f6" opacity="0.7" stroke="#3b82f6"
                                        stroke-width="1.5" />
                                    <text x="36" y="27" fill="white" font-size="7" text-anchor="middle"
                                        font-weight="bold" font-family="sans-serif">‚úì</text>
                                    <path d="M22 24L30 24" stroke="#3b82f6" stroke-width="1.5" stroke-dasharray="3 2"
                                        marker-end="url(#arrowBlue)" />
                                    <defs>
                                        <marker id="arrowBlue" viewBox="0 0 6 6" refX="5" refY="3" markerWidth="4"
                                            markerHeight="4" orient="auto">
                                            <path d="M0,0 L6,3 L0,6Z" fill="#3b82f6" />
                                        </marker>
                                    </defs>
                                </svg>
                                <p>Drivers control robots. The active scoring hub <strong>shifts every 25
                                        seconds</strong> between 4 positions on the field. The alliance that scored more
                                    in auto gets to choose the shift order. Fuel scored during inactive periods is
                                    <em>hoarded</em> and only counts once the hub becomes active again.
                                </p>
                            </div>
                        </div>
                        <div class="info-phase">
                            <div class="info-phase__header" style="border-color:#22c55e;">
                                <span class="info-phase__time">120 ‚Äì 150s</span>
                                <span class="info-phase__name">Endgame</span>
                            </div>
                            <div style="display:flex;gap:12px;align-items:flex-start;">
                                <svg viewBox="0 0 48 48" style="width:48px;flex-shrink:0;"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <line x1="14" y1="40" x2="14" y2="10" stroke="#22c55e" stroke-width="2" />
                                    <line x1="24" y1="40" x2="24" y2="8" stroke="#22c55e" stroke-width="2.5" />
                                    <line x1="34" y1="40" x2="34" y2="10" stroke="#22c55e" stroke-width="2" />
                                    <line x1="10" y1="16" x2="38" y2="16" stroke="#22c55e" stroke-width="0.8"
                                        opacity="0.4" />
                                    <line x1="10" y1="26" x2="38" y2="26" stroke="#22c55e" stroke-width="0.8"
                                        opacity="0.4" />
                                    <line x1="10" y1="36" x2="38" y2="36" stroke="#22c55e" stroke-width="0.8"
                                        opacity="0.4" />
                                    <text x="8" y="18" fill="#22c55e" font-size="6" font-weight="bold"
                                        font-family="sans-serif">L3</text>
                                    <text x="8" y="28" fill="#22c55e" font-size="6" font-weight="bold"
                                        font-family="sans-serif">L2</text>
                                    <text x="8" y="38" fill="#22c55e" font-size="6" font-weight="bold"
                                        font-family="sans-serif">L1</text>
                                    <rect x="20" y="23" width="8" height="6" rx="1" fill="rgba(59,130,246,0.6)"
                                        stroke="#3b82f6" stroke-width="0.8" />
                                </svg>
                                <p>Robots can continue scoring fuel AND climb a tower for bonus points. Three climb
                                    levels: <strong>L1 = 10 pts</strong>, <strong>L2 = 20 pts</strong>, <strong>L3 = 30
                                        pts</strong>. Human player can also throw fuel into the hub during endgame.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ====== HUB SHIFT MECHANIC DIAGRAM ====== -->
                <div class="info-card">
                    <h3 class="info-card__title">üîÑ Hub Shift Mechanic</h3>
                    <p style="margin-bottom:16px;">During Teleop, only <strong>one alliance Hub is active</strong> at a
                        time. The
                        active hub toggles every 25 seconds across 4 shifts. Only fuel scored into the <em>active</em>
                        hub counts!</p>
                    <div style="display:flex;justify-content:center;padding:8px;">
                        <svg viewBox="0 0 520 120" style="width:100%;max-width:520px;"
                            xmlns="http://www.w3.org/2000/svg">
                            <!-- Shift labels -->
                            <text x="70" y="18" fill="rgba(255,255,255,0.6)" font-size="10" text-anchor="middle"
                                font-weight="bold" font-family="sans-serif">SHIFT 1</text>
                            <text x="200" y="18" fill="rgba(255,255,255,0.6)" font-size="10" text-anchor="middle"
                                font-weight="bold" font-family="sans-serif">SHIFT 2</text>
                            <text x="330" y="18" fill="rgba(255,255,255,0.6)" font-size="10" text-anchor="middle"
                                font-weight="bold" font-family="sans-serif">SHIFT 3</text>
                            <text x="460" y="18" fill="rgba(255,255,255,0.6)" font-size="10" text-anchor="middle"
                                font-weight="bold" font-family="sans-serif">SHIFT 4</text>

                            <!-- Shift 1: Red Active -->
                            <!-- Red Hub -->
                            <polygon points="50,30 65,22 80,30 80,50 65,58 50,50" fill="#ef4444" stroke="#ef4444"
                                stroke-width="2" />
                            <text x="65" y="44" fill="white" font-size="9" text-anchor="middle" font-weight="bold"
                                font-family="sans-serif">RED</text>
                            <!-- Blue Hub (Inactive) -->
                            <polygon points="95,30 110,22 125,30 125,50 110,58 95,50" fill="rgba(255,255,255,0.05)"
                                stroke="rgba(255,255,255,0.15)" stroke-width="1" />
                            <text x="110" y="44" fill="rgba(255,255,255,0.3)" font-size="9" text-anchor="middle"
                                font-family="sans-serif">BLUE</text>

                            <!-- Arrow 1->2 -->
                            <path d="M135 40 L165 40" stroke="rgba(255,255,255,0.2)" stroke-width="1.5"
                                stroke-dasharray="3 2" marker-end="url(#shiftArr)" />

                            <!-- Shift 2: Blue Active -->
                            <!-- Red Hub (Inactive) -->
                            <polygon points="180,30 195,22 210,30 210,50 195,58 180,50" fill="rgba(255,255,255,0.05)"
                                stroke="rgba(255,255,255,0.15)" stroke-width="1" />
                            <text x="195" y="44" fill="rgba(255,255,255,0.3)" font-size="9" text-anchor="middle"
                                font-family="sans-serif">RED</text>
                            <!-- Blue Hub -->
                            <polygon points="225,30 240,22 255,30 255,50 240,58 225,50" fill="#3b82f6" stroke="#3b82f6"
                                stroke-width="2" />
                            <text x="240" y="44" fill="white" font-size="9" text-anchor="middle" font-weight="bold"
                                font-family="sans-serif">BLUE</text>

                            <!-- Arrow 2->3 -->
                            <path d="M265 40 L295 40" stroke="rgba(255,255,255,0.2)" stroke-width="1.5"
                                stroke-dasharray="3 2" marker-end="url(#shiftArr)" />

                            <!-- Shift 3: Red Active -->
                            <!-- Red Hub -->
                            <polygon points="310,30 325,22 340,30 340,50 325,58 310,50" fill="#ef4444" stroke="#ef4444"
                                stroke-width="2" />
                            <text x="325" y="44" fill="white" font-size="9" text-anchor="middle" font-weight="bold"
                                font-family="sans-serif">RED</text>
                            <!-- Blue Hub (Inactive) -->
                            <polygon points="355,30 370,22 385,30 385,50 370,58 355,50" fill="rgba(255,255,255,0.05)"
                                stroke="rgba(255,255,255,0.15)" stroke-width="1" />
                            <text x="370" y="44" fill="rgba(255,255,255,0.3)" font-size="9" text-anchor="middle"
                                font-family="sans-serif">BLUE</text>

                            <!-- Arrow 3->4 -->
                            <path d="M395 40 L425 40" stroke="rgba(255,255,255,0.2)" stroke-width="1.5"
                                stroke-dasharray="3 2" marker-end="url(#shiftArr)" />

                            <!-- Shift 4: Blue Active -->
                            <!-- Red Hub (Inactive) -->
                            <polygon points="440,30 455,22 470,30 470,50 455,58 440,50" fill="rgba(255,255,255,0.05)"
                                stroke="rgba(255,255,255,0.15)" stroke-width="1" />
                            <text x="455" y="44" fill="rgba(255,255,255,0.3)" font-size="9" text-anchor="middle"
                                font-family="sans-serif">RED</text>
                            <!-- Blue Hub -->
                            <polygon points="485,30 500,22 515,30 515,50 500,58 485,50" fill="#3b82f6" stroke="#3b82f6"
                                stroke-width="2" />
                            <text x="500" y="44" fill="white" font-size="9" text-anchor="middle" font-weight="bold"
                                font-family="sans-serif">BLUE</text>

                            <!-- legend -->
                            <rect x="150" y="80" width="16" height="12" rx="2" fill="#ef4444" />
                            <text x="175" y="89" fill="rgba(255,255,255,0.6)" font-size="9" font-family="sans-serif">=
                                Red Active</text>

                            <rect x="250" y="80" width="16" height="12" rx="2" fill="#3b82f6" />
                            <text x="275" y="89" fill="rgba(255,255,255,0.6)" font-size="9" font-family="sans-serif">=
                                Blue Active</text>

                            <rect x="350" y="80" width="16" height="12" rx="2" fill="rgba(255,255,255,0.05)"
                                stroke="rgba(255,255,255,0.15)" stroke-width="1" />
                            <text x="375" y="89" fill="rgba(255,255,255,0.4)" font-size="9" font-family="sans-serif">=
                                Inactive</text>

                            <defs>
                                <marker id="shiftArr" viewBox="0 0 6 6" refX="5" refY="3" markerWidth="5"
                                    markerHeight="5" orient="auto">
                                    <path d="M0,0 L6,3 L0,6Z" fill="rgba(255,255,255,0.3)" />
                                </marker>
                            </defs>
                        </svg>
                    </div>
                    <p style="margin-top:12px;font-size:11px;color:var(--text-muted);text-align:center;">The alliance
                        winning auto chooses which hub activates first ‚Äî a major strategic advantage!</p>
                </div>

                <!-- ====== GAME PIECE & SCORING DETAILS ====== -->
                <div class="info-card">
                    <h3 class="info-card__title">üìä Scoring</h3>
                    <div style="display:flex;gap:16px;flex-wrap:wrap;margin-bottom:16px;">
                        <!-- Fuel ball illustration -->
                        <div
                            style="flex:1;min-width:140px;text-align:center;padding:16px;background:rgba(245,158,11,0.06);border:1px solid rgba(245,158,11,0.15);border-radius:10px;">
                            <svg viewBox="0 0 80 80" style="width:60px;margin:0 auto 8px;"
                                xmlns="http://www.w3.org/2000/svg">
                                <circle cx="40" cy="40" r="28" fill="url(#fuelGrad)" stroke="#f59e0b"
                                    stroke-width="2" />
                                <ellipse cx="34" cy="34" rx="8" ry="6" fill="rgba(255,255,255,0.2)"
                                    transform="rotate(-30 34 34)" />
                                <defs>
                                    <radialGradient id="fuelGrad" cx="40%" cy="40%">
                                        <stop offset="0%" stop-color="#fbbf24" />
                                        <stop offset="100%" stop-color="#d97706" />
                                    </radialGradient>
                                </defs>
                            </svg>
                            <div style="font-size:13px;font-weight:700;color:#f59e0b;">Fuel Ball</div>
                            <div style="font-size:10px;color:var(--text-muted);">Foam ball game piece</div>
                        </div>
                        <!-- Hub illustration -->
                        <div
                            style="flex:1;min-width:140px;text-align:center;padding:16px;background:rgba(168,85,247,0.06);border:1px solid rgba(168,85,247,0.15);border-radius:10px;">
                            <svg viewBox="0 0 80 80" style="width:60px;margin:0 auto 8px;"
                                xmlns="http://www.w3.org/2000/svg">
                                <polygon points="40,8 68,22 68,58 40,72 12,58 12,22" fill="rgba(168,85,247,0.2)"
                                    stroke="#a78bfa" stroke-width="2" />
                                <polygon points="40,18 58,28 58,52 40,62 22,52 22,28" fill="rgba(168,85,247,0.1)"
                                    stroke="#a78bfa" stroke-width="1" stroke-dasharray="3 2" />
                                <circle cx="40" cy="40" r="8" fill="rgba(168,85,247,0.3)" stroke="#a78bfa"
                                    stroke-width="1.5" />
                                <circle cx="40" cy="40" r="3" fill="#a78bfa" />
                            </svg>
                            <div style="font-size:13px;font-weight:700;color:#a78bfa;">Scoring Hub</div>
                            <div style="font-size:10px;color:var(--text-muted);">1 pt per fuel scored</div>
                        </div>
                        <!-- Tower illustration -->
                        <div
                            style="flex:1;min-width:140px;text-align:center;padding:16px;background:rgba(34,197,94,0.06);border:1px solid rgba(34,197,94,0.15);border-radius:10px;">
                            <svg viewBox="0 0 80 80" style="width:60px;margin:0 auto 8px;"
                                xmlns="http://www.w3.org/2000/svg">
                                <line x1="25" y1="72" x2="25" y2="12" stroke="#22c55e" stroke-width="3" />
                                <line x1="55" y1="72" x2="55" y2="12" stroke="#22c55e" stroke-width="3" />
                                <line x1="40" y1="72" x2="40" y2="8" stroke="#22c55e" stroke-width="3.5" />
                                <rect x="20" y="52" width="40" height="2" rx="1" fill="#22c55e" opacity="0.5" />
                                <rect x="20" y="36" width="40" height="2" rx="1" fill="#22c55e" opacity="0.5" />
                                <rect x="20" y="20" width="40" height="2" rx="1" fill="#22c55e" opacity="0.5" />
                                <text x="66" y="56" fill="#22c55e" font-size="8" font-weight="bold"
                                    font-family="sans-serif">L1</text>
                                <text x="66" y="40" fill="#22c55e" font-size="8" font-weight="bold"
                                    font-family="sans-serif">L2</text>
                                <text x="66" y="24" fill="#22c55e" font-size="8" font-weight="bold"
                                    font-family="sans-serif">L3</text>
                            </svg>
                            <div style="font-size:13px;font-weight:700;color:#22c55e;">Climbing Tower</div>
                            <div style="font-size:10px;color:var(--text-muted);">10 / 20 / 30 pts</div>
                        </div>
                    </div>
                    <div class="info-scoring-grid">
                        <div class="info-scoring-item">
                            <div class="info-scoring-item__value">1 pt</div>
                            <div class="info-scoring-item__label">per fuel in active hub</div>
                        </div>
                        <div class="info-scoring-item">
                            <div class="info-scoring-item__value">3 pts</div>
                            <div class="info-scoring-item__label">leaving zone (auto)</div>
                        </div>
                        <div class="info-scoring-item">
                            <div class="info-scoring-item__value">10 / 20 / 30 pts</div>
                            <div class="info-scoring-item__label">climb L1 / L2 / L3</div>
                        </div>
                        <div class="info-scoring-item">
                            <div class="info-scoring-item__value">8 / 15 pts</div>
                            <div class="info-scoring-item__label">minor / major foul penalty</div>
                        </div>
                    </div>
                </div>

                <div class="info-card">
                    <h3 class="info-card__title">üèÜ Ranking Points (RP)</h3>
                    <p style="margin-bottom:12px;">Tournaments rank teams by <strong>Ranking Points</strong>, not just
                        wins. Each match can earn up to <strong>4 RP</strong>:</p>
                    <div class="info-rp-grid">
                        <div class="info-rp-item">
                            <div class="info-rp-item__badge"
                                style="background:rgba(34,197,94,0.15);border-color:rgba(34,197,94,0.3);">2 RP</div>
                            <div><strong>Win</strong> ‚Äî Beat the opposing alliance (tie = 1 RP each)</div>
                        </div>
                        <div class="info-rp-item">
                            <div class="info-rp-item__badge"
                                style="background:rgba(59,130,246,0.15);border-color:rgba(59,130,246,0.3);">1 RP</div>
                            <div><strong>Energized</strong> ‚Äî Score ‚â•100 fuel in the active hub</div>
                        </div>
                        <div class="info-rp-item">
                            <div class="info-rp-item__badge"
                                style="background:rgba(245,158,11,0.15);border-color:rgba(245,158,11,0.3);">1 RP</div>
                            <div><strong>Supercharged</strong> ‚Äî Score ‚â•360 fuel in the active hub (elite)</div>
                        </div>
                        <div class="info-rp-item">
                            <div class="info-rp-item__badge"
                                style="background:rgba(139,92,246,0.15);border-color:rgba(139,92,246,0.3);">1 RP</div>
                            <div><strong>Traversal</strong> ‚Äî Alliance earns ‚â•50 total climb points</div>
                        </div>
                    </div>
                </div>

                <div class="info-card">
                    <h3 class="info-card__title">üö® Penalties</h3>
                    <p>Fouls give points to the <em>opposing</em> alliance. Defense-heavy tactics risk more fouls:</p>
                    <ul style="margin-top:8px;padding-left:20px;color:var(--text-secondary);">
                        <li><strong>Minor Foul:</strong> 8 pts to opponent ‚Äî common during aggressive play</li>
                        <li><strong>Major Foul:</strong> 15 pts to opponent ‚Äî usually from excessive contact or rule
                            violations</li>
                        <li>Playing defense increases foul probability (~30-60% per match depending on aggression)</li>
                    </ul>
                </div>
            </div>

            <!-- SECTION 2: Robot Tiers -->
            <div class="info-section" id="sec_robotTiers">
                <div class="section-title">ü§ñ Robot Tier System</div>

                <div class="info-card">
                    <p style="margin-bottom:16px;">The simulator models 3 robot tiers representing the range of FRC
                        robots at competition.
                        Each tier has different performance in <strong>speed, accuracy, intake, climbing, defense, and
                            reliability</strong>.</p>
                </div>

                <div id="tierCardsContainer"></div>
            </div>

            <!-- SECTION 3: Simulation Workflow -->
            <div class="info-section" id="sec_simWorkflow">
                <div class="section-title">‚öôÔ∏è How the Simulation Works</div>

                <div class="info-card">
                    <h3 class="info-card__title">Simulation Pipeline</h3>
                    <p style="margin-bottom:16px;">Each simulated match follows these steps in order:</p>
                    <div class="workflow-steps">
                        <div class="workflow-step">
                            <div class="workflow-step__num">1</div>
                            <div class="workflow-step__content">
                                <strong>Robot Reliability Roll</strong>
                                <p>Each robot rolls its status: <span style="color:#22c55e;">full (operational)</span>,
                                    <span style="color:#eab308;">partial (reduced output)</span>, or
                                    <span style="color:#ef4444;">dead (out of match)</span>.
                                    Better tiers have higher reliability.
                                </p>
                            </div>
                        </div>
                        <div class="workflow-step">
                            <div class="workflow-step__num">2</div>
                            <div class="workflow-step__content">
                                <strong>Autonomous Phase (20s)</strong>
                                <p>Each robot runs its auto routine based on its Auto Tier.
                                    Preloaded fuel is shot at the hub ‚Äî actual scored = attempts √ó tier accuracy √ó
                                    variance.
                                    The alliance that scores more picks the hub shift order.</p>
                            </div>
                        </div>
                        <div class="workflow-step">
                            <div class="workflow-step__num">3</div>
                            <div class="workflow-step__content">
                                <strong>Teleop Phase (4 √ó 25s shifts)</strong>
                                <p>Robots cycle: collect fuel ‚Üí drive to hub ‚Üí shoot.
                                    Cycle time depends on drivetrain speed, intake rate, shoot rate, and congestion.
                                    Defense disrupts opponent cycles by 25-40%.
                                    During inactive shifts, robots hoard fuel or play defense (depending on tactic).</p>
                            </div>
                        </div>
                        <div class="workflow-step">
                            <div class="workflow-step__num">4</div>
                            <div class="workflow-step__content">
                                <strong>Endgame (30s)</strong>
                                <p>Robots attempt to climb. Target level depends on climber capability and tactic.
                                    Climb success is probabilistic (better tiers = higher success rate).
                                    Remaining time is spent scoring fuel.</p>
                            </div>
                        </div>
                        <div class="workflow-step">
                            <div class="workflow-step__num">5</div>
                            <div class="workflow-step__content">
                                <strong>Fouls & Penalties</strong>
                                <p>Foul probability depends on tactic aggression.
                                    Minor fouls = 8 pts, major = 15 pts. These are added to the <em>opponent's</em>
                                    score.</p>
                            </div>
                        </div>
                        <div class="workflow-step">
                            <div class="workflow-step__num">6</div>
                            <div class="workflow-step__content">
                                <strong>Score & RP Calculation</strong>
                                <p>Total score = active hub fuel + climb points + opponent penalty points.
                                    RP is awarded based on thresholds (see Game Overview).
                                    Every match has random variance to model real competition unpredictability.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="info-card">
                    <h3 class="info-card__title">Batch Simulation & Optimal Tactics</h3>
                    <p><strong>Batch Simulation</strong> runs N matches (default 200) with identical alliance configs
                        and averages the results. This smooths out variance and shows the <em>expected</em> performance.
                    </p>
                    <p style="margin-top:8px;"><strong>Optimal Tactics Finder</strong> tests all 64 tactic matchups (8 √ó
                        8)
                        with batch simulations, then ranks tactics by average RP earned. The heatmap shows which tactics
                        perform best against specific opponents.</p>
                </div>

                <div class="info-card">
                    <h3 class="info-card__title">4 Toggleable Realism Layers</h3>
                    <div class="info-scoring-grid">
                        <div class="info-scoring-item">
                            <div class="info-scoring-item__value">üîß</div>
                            <div class="info-scoring-item__label">Robot Breakdown ‚Äî chance of partial/dead status</div>
                        </div>
                        <div class="info-scoring-item">
                            <div class="info-scoring-item__value">üîã</div>
                            <div class="info-scoring-item__label">Brownout ‚Äî battery sag reduces output late-match</div>
                        </div>
                        <div class="info-scoring-item">
                            <div class="info-scoring-item__value">üö®</div>
                            <div class="info-scoring-item__label">Fouls ‚Äî probabilistic penalty generation</div>
                        </div>
                        <div class="info-scoring-item">
                            <div class="info-scoring-item__value">üöß</div>
                            <div class="info-scoring-item__label">Congestion ‚Äî 3+ robots in one zone slows cycles</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SECTION 4: Tactic Guide -->
            <div class="info-section" id="sec_tacticGuide">
                <div class="section-title">üìã Tactic Guide</div>
                <div class="info-card">
                    <p>Each tactic is an <strong>alliance-level strategy</strong> ‚Äî it defines what all 3 robots do as a
                        team.
                        Select a tactic below to see how it works in detail.</p>
                </div>
                <div class="tactic-selector" id="tacticSelector"></div>
                <div class="info-card" id="tacticDetail" style="margin-top:16px;">
                    <p style="color:var(--text-muted);">Select a tactic above to see details.</p>
                </div>
            </div>

        </div>

        <!-- ============================================================ -->
        <!-- SIMULATOR TAB -->
        <!-- ============================================================ -->
        <div id="panelSim" class="main-panel">

            <!-- ALLIANCE BUILDER -->
            <div class="section-title">Alliance Builder</div>
            <div class="alliance-grid" id="allianceBuilder">
                <!-- Red Alliance -->
                <div class="alliance-panel alliance-panel--red">
                    <div class="alliance-panel__header">
                        <div class="alliance-panel__dot"></div>
                        <span class="alliance-panel__title">Red Alliance</span>
                    </div>
                    <div class="form-group" style="margin-bottom:16px;">
                        <label>Alliance Tactic</label>
                        <select id="redTactic" style="font-size:14px;padding:10px 14px;"></select>
                    </div>
                    <div id="redTacticInfo"
                        style="padding:10px 14px;background:rgba(0,0,0,0.2);border-radius:8px;margin-bottom:16px;font-size:12px;color:var(--text-secondary);display:none;">
                    </div>
                    <div id="redRobots"></div>
                    <div class="hp-select">
                        <div class="form-group">
                            <label>Human Player Skill</label>
                            <select id="redHP">
                                <option value="low">Low Skill (~0.2 pts/s)</option>
                                <option value="average" selected>Average (~0.6 pts/s)</option>
                                <option value="elite">Elite (~1.5 pts/s)</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Blue Alliance -->
                <div class="alliance-panel alliance-panel--blue">
                    <div class="alliance-panel__header">
                        <div class="alliance-panel__dot"></div>
                        <span class="alliance-panel__title">Blue Alliance</span>
                    </div>
                    <div class="form-group" style="margin-bottom:16px;">
                        <label>Alliance Tactic</label>
                        <select id="blueTactic" style="font-size:14px;padding:10px 14px;"></select>
                    </div>
                    <div id="blueTacticInfo"
                        style="padding:10px 14px;background:rgba(0,0,0,0.2);border-radius:8px;margin-bottom:16px;font-size:12px;color:var(--text-secondary);display:none;">
                    </div>
                    <div id="blueRobots"></div>
                    <div class="hp-select">
                        <div class="form-group">
                            <label>Human Player Skill</label>
                            <select id="blueHP">
                                <option value="low">Low Skill (~0.2 pts/s)</option>
                                <option value="average" selected>Average (~0.6 pts/s)</option>
                                <option value="elite">Elite (~1.5 pts/s)</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <!-- REALISM TOGGLES -->
            <div class="realism-toggles">
                <div class="realism-toggles__title">Realism Layers</div>
                <label class="toggle-item"><input type="checkbox" id="toggleBreakdown" checked> Robot Breakdown</label>
                <label class="toggle-item"><input type="checkbox" id="toggleBrownout" checked> Brownout</label>
                <label class="toggle-item"><input type="checkbox" id="toggleFouls" checked> Fouls</label>
                <label class="toggle-item"><input type="checkbox" id="toggleCongestion" checked> Congestion</label>
            </div>

            <!-- SIMULATION CONTROLS -->
            <div class="controls">
                <button class="btn btn--primary" id="btnSingleMatch">‚ñ∂ Run Single Match</button>
                <div class="controls__separator"></div>
                <button class="btn btn--secondary" id="btnBatchSim">üìä Batch Simulation</button>
                <input type="number" class="batch-input" id="batchCount" value="200" min="10" max="1000" step="10">
                <span style="font-size:13px;color:var(--text-muted)">matches</span>
                <div class="controls__separator"></div>
                <button class="btn btn--optimal" id="btnOptimal">üèÜ Find Optimal Tactics</button>
            </div>

            <!-- RESULTS -->
            <div class="results" id="results">
                <div class="results__empty" id="resultsEmpty">
                    <div class="results__empty-icon">üéÆ</div>
                    Choose an alliance tactic, customize your robots, then run a simulation
                </div>
                <div id="singleResult" class="tab-content"></div>
                <div id="batchResult" class="tab-content"></div>
                <div id="optimalResult" class="tab-content"></div>
            </div>

        </div>

    </div>

    <footer class="footer">
        FRC 2026 "REBUILT" Tactic Simulator ¬∑ Physics-based engine with 9 realism layers ¬∑ 9 auto levels
    </footer>

    <script src="simulator.js"></script>
    <script src="app.js"></script>

</body>

</html>